{
  "version": 3,
  "file": "server.spec.js",
  "sourceRoot": "../..",
  "sources": [
    "src/renderers/server.spec.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;AAAA,MAAA,WAAA,EAAA,MAAA,EAAA,SAAA,EAAA,KAAA,EAAA,IAAA,EAAA,cAAA,EAAA,UAAA,EAAA,IAAA,EAAA,KAAA,EAAA;;EAAA,KAAA,GAAQ,OAAA,CAAQ,OAAR;;EACR,SAAA,GAAY,OAAA,CAAQ,YAAR;;EAEZ,KAAA,GAAQ,OAAA,CAAQ,OAAR;;EACR,CAAA,CAAE,WAAF,CAAA,GAAkB,OAAA,CAAQ,cAAR,CAAlB;;EAEA,KAAA,GAAQ,OAAA,CAAQ,UAAR;;EACR,CAAA,CAAE,cAAF,CAAA,GAAqB,OAAA,CAAQ,UAAR,CAArB;;EAEA,IAAA,GAAO,QAAA,CAAC,GAAD,EAAA,GAAM,QAAN,CAAA;WACL,KAAK,CAAC,aAAN,CAAoB,GAApB,EAAyB;MAAA,QAAA,EAAU;IAAV,CAAzB;EADK;;EAGD,OAAN,MAAA,KAAA,QAAmB,KAAK,CAAC,UAAzB;IACE,MAAQ,CAAA,CAAA;aACL,IAAA,CAAK,MAAL,EACE,IAAA,CAAK,MAAL,EAAa,IAAA,CAAK,OAAL,EAAc,CAAA,CAAA,CAAG,IAAC,CAAA,KAAK,CAAC,IAAI,CAAC,KAAf,CAAqB,GAArB,CAAA,CAA0B,IAAC,CAAA,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,KAAlD,CAAA,CAAd,CAAb,CADF,EAEE,IAAA,CAAK,MAAL,EAAa,YAAb,CAFF;IADK;;EADV;;EAMM;IAAN,MAAA,OAAA,QAAqB,KAAK,CAAC,UAA3B;MAEE,MAAQ,CAAA,CAAA;eACN,IAAA,CAAK,KAAL,EAAY,IAAA,CAAK,GAAL,EAAU,IAAC,CAAA,OAAO,CAAC,IAAI,CAAC,KAAxB,CAAZ;MADM;;IAFV;;IACE,MAAC,CAAA,YAAD,GAAe;MAAA,IAAA,EAAM,SAAS,CAAC;IAAhB;;;;;;EAIjB,UAAA,GAAa,QAAA,CAAC,GAAD,EAAM,KAAN,EAAa,IAAb,CAAA;WACX,IAAI,KAAK,CAAC,IAAV,CAAe,GAAf,EAAoB,KAApB,EAA2B,EAA3B,EAA+B,IAA/B,EAAqC,MAArC,EAA6C,MAA7C,EAAqD,WAArD,EAAkE,IAAlE,EAAwE,IAAxE,EAA8E,EAA9E,EAAkF,EAAlF,EAAsF,IAAtF;EADW;;EAGb,QAAA,CAAS,gBAAT,EAA2B,QAAA,CAAA,CAAA;AACzB,QAAA,MAAA,EAAA;IAAA,MAAA,GAAS;IACT,cAAA,GAAiB;IAEjB,UAAA,CAAW,QAAA,CAAA,CAAA;AACT,UAAA,OAAA,EAAA,MAAA,EAAA,IAAA,EAAA;MAAA,IAAA,GAAO,UAAA,CAAW,GAAX,EAAgB,SAAhB,EAA2B,CAA3B;MACP,MAAA,GAAS,IAAI,KAAK,CAAC,MAAV,CAAiB,MAAjB,EAAyB,mBAAzB;MAET,SAAA,GAAY,IAAI,KAAK,CAAC,SAAV,CAAoB;QAAA,KAAA,EAAO;MAAP,CAApB;MACZ,SAAS,CAAC,SAAV,CAAoB,MAApB;MACA,SAAS,CAAC,OAAV,CAAkB,IAAlB;MAEA,OAAA,GAAU,CAAA;MACV,MAAA,GAAS;QAAA,OAAA,EAAS,KAAK,CAAC,IAAN,CAAA;MAAT;aAET,cAAA,GAAiB,IAAI,cAAJ,CAAmB,OAAnB,EAA4B,MAA5B,EAAoC,SAApC;IAXR,CAAX;WAaA,QAAA,CAAS,sBAAT,EAAiC,QAAA,CAAA,CAAA;AAC/B,UAAA,aAAA,EAAA;MAAA,aAAA,GAAgB;MAChB,aAAA,GAAgB;MAEhB,UAAA,CAAW,QAAA,CAAA,CAAA;AACT,YAAA,MAAA,EAAA;QAAA,MAAA,GACE;UAAA,IAAA,EAAM;QAAN;QACF,YAAA,GACE;UAAA,WAAA,EACE;YAAA,MAAA,EACE;cAAA,YAAA,EAAc,CAAA,CAAd;cACA,WAAA,EAAa,CAAA;YADb;UADF;QADF;QAKF,aAAA,GAAgB,IAAI;QACpB,MAAM,CAAC,OAAO,CAAC,OAAf,CAAuB,aAAvB;QAEA,aAAA,GAAgB,cAAc,CAAC,MAAf,CAAsB,MAAtB,EAA8B,YAA9B;eAChB;MAbS,CAAX;aAeA,QAAA,CAAS,mCAAT,EAA8C,QAAA,CAAA,CAAA;QAC5C,UAAA,CAAW,QAAA,CAAA,CAAA;iBACT,aAAa,CAAC,OAAd,CAAsB,KAAK,CAAC,aAAN,CAAoB,MAApB,CAAtB;QADS,CAAX;eAGA,EAAA,CAAG,qBAAH,EAA0B,QAAA,CAAA,CAAA;iBACxB,aAAa,CAAC,IAAd,CAAmB,QAAA,CAAC,MAAD,CAAA;YACjB,CAAC,MAAM,CAAC,IAAP,CAAY,MAAZ,CAAD,CAAoB,CAAC,MAAM,CAAC,GAA5B,CAAgC,CAAE,GAAF,CAAhC;mBACA,MAAO,CAAA,GAAA,CAAI,CAAC,MAAM,CAAC,KAAnB,CAAyB,EAAA,GACvB,mBADuB,GAEvB,QAFuB,GAGrB,oDAHqB,GAIrB,4DAJqB,GAKvB,SALF;UAFiB,CAAnB;QADwB,CAA1B;MAJ4C,CAA9C;IAnB+B,CAAjC;EAjByB,CAA3B;AA1BA",
  "sourcesContent": [
    "React = require \"react\"\nPropTypes = require \"prop-types\"\n\nsinon = require \"sinon\"\n{ FakePromise } = require \"fake-promise\"\n\nmodel = require \"../model\"\n{ ServerRenderer } = require \"./server\"\n\nelem = (tag, children...) ->\n  React.createElement tag, children: children\n\nclass Root extends React.Component\n  render: ->\n    (elem \"html\",\n      (elem \"head\", elem \"title\", \"#{@props.page.title} | #{@props.paramorph.config.title}\")\n      (elem \"body\", \"%%%BODY%%%\")\n    )\nclass Layout extends React.Component\n  @contextTypes: page: PropTypes.object\n  render: ->\n    elem \"div\", elem \"p\", @context.page.title\n\ncreatePage = (url, title, date) ->\n  new model.Page url, title, \"\", null, \"test\", \"test\", \"./test.md\", true, true, [], [], date\n\ndescribe \"ServerRenderer\", ->\n  router = null\n  testedRenderer = null\n\n  beforeEach ->\n    page = createPage \"/\", \"Meeting\", 0\n    layout = new model.Layout \"test\", \"./layouts/test.md\"\n\n    paramorph = new model.Paramorph title: \"website.test\"\n    paramorph.addLayout layout\n    paramorph.addPage page\n\n    history = {}\n    router = resolve: sinon.stub()\n\n    testedRenderer = new ServerRenderer history, router, paramorph\n\n  describe \"after calling render\", ->\n    routerPromise = null\n    resultPromise = null\n\n    beforeEach ->\n      locals =\n        Root: Root\n      webpackStats =\n        compilation:\n          assets:\n            \"bundle.css\": {}\n            \"bundle.js\": {}\n\n      routerPromise = new FakePromise\n      router.resolve.returns routerPromise\n\n      resultPromise = testedRenderer.render locals, webpackStats\n      undefined\n\n    describe \"and after resoling router promise\", ->\n      beforeEach ->\n        routerPromise.resolve React.createElement Layout\n\n      it \"renders single page\", ->\n        resultPromise.then (result) ->\n          (Object.keys result).should.eql [ \"/\" ]\n          result[\"/\"].should.equal \"\" +\n            \"<!DOCTYPE html>\\n\" +\n            \"<html>\" +\n              \"<head><title>Meeting | website.test</title></head>\" +\n              \"<body><div data-reactroot=\\\"\\\"><p>Meeting</p></div></body>\" +\n            \"</html>\"\n\n"
  ]
}